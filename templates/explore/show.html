<table style="width: 100%; height: 100%;">
    {% for i in range(height) %}
    <tr>
    {% for j in range(width) %}
        {% if width * i + j < size  %}
        <td>
            {% set array = matrices[width * i + j].as_list() %}
            $$\begin{pmatrix}{% for column in range(array|length - 1)        %}
                             {%     for row in range(array[0]|length - 1)    %}
                             {{         array[column][row]                  }}&
                             {%     endfor                                   %}
                             {{     array[column][array[0]|length - 1]     }}\\
                             {% endfor                                       %}
                             {% for row in range(array[0]|length - 1)        %}
                             {{     array[array|length - 1][row]            }}&
                             {% endfor                                       %}
                             {{ array[array|length - 1][array[0]|length - 1] }}\end{pmatrix}$$
        </td>
        {% else %}
        <td></td>
        {% endif %}
    {% endfor %}
    </tr>
    {% endfor %}
</table>
